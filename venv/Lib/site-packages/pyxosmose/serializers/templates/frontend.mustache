--[[
----------------------------------------------------------------------
Frontend for the Students
----------------------------------------------------------------------
Original Author: Michel Lopez / IPESE
--]]
local osmose = require 'osmose'
local my_obj = "{{objective}}"
local frontend = osmose.Project ('{{projname}}', my_obj)
frontend.operationalCosts = 'operating_data.csv'

frontend:load (
{{#ets}}
    { {{et_name}}= 'ET.{{et_name}}'{{#multitime}}, with = '{{et_name}}modeldata.csv'{{/multitime}} }{{#comma}},{{/comma}}
{{/ets}}
)

frontend.options.mathProg = {
{{#options.mathProg}}
    {{name}} = {{#unescape}}{{&value}}{{/unescape}}{{^unescape}}'{{value}}'{{/unescape}}{{#comma}},{{/comma}}
{{/options.mathProg}}
{{^options.mathProg}}
    language = 'ampl', solver_name = 'gurobi', options = {'display_1col 10000','display_eps 0.0001','presolve_eps 1e-4','omit_zero_rows 1', 'omit_zero_cols 1'}
{{/options.mathProg}}
}

frontend.options.graph.format = 'svg'
frontend.options.graph.icc = {'model','unit','utility'}
frontend.options.graph.carnot = {'model','utilities'}
frontend.options.graph.spaghetti = true
frontend.options.graph.rungnuplot = false

frontend.options.storejson = true

frontend:scenario(1):time({{periods}})
frontend:solve()
